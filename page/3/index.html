<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="chanlee, programming, mobile, arduino, ios, android, xamarin, linux" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="Computing and Programming issues">
<meta property="og:type" content="website">
<meta property="og:title" content="Programming Note">
<meta property="og:url" content="http://chanlee.github.io/page/3/index.html">
<meta property="og:site_name" content="Programming Note">
<meta property="og:description" content="Computing and Programming issues">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Programming Note">
<meta name="twitter:description" content="Computing and Programming issues">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '작성자'
    }
  };
</script>




  <link rel="canonical" href="http://chanlee.github.io/page/3/"/>


  <title> Programming Note </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="ko">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-46034286-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Programming Note</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">chanlee blog</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            홈
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            카테고리
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            아카이브
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            태그
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/11/understand-javascript-iife/" itemprop="url">
                  Javascript IIFE 이해하기
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">작성일</span>
            <time itemprop="dateCreated" datetime="2014-01-11T16:44:07+09:00" content="2014-01-11">
              2014-01-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/01/11/understand-javascript-iife/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/11/understand-javascript-iife/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>IIFE(Immediately Invoked Function Expressions: “Iffy”라고 발음)는 즉시 호출 함수 표현식의 줄임말입니다.</p>
<p><img src="/assets/iife.jpg" alt="iife"></p>
<p>기본적인 형태는 다음과 같습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Do fun stuff</span></div><div class="line">    &#125;</div><div class="line">)()</div></pre></td></tr></table></figure></p>
<p>이것은 즉시 호출되는 익명 함수 표현식 입니다. 이것은 자바스크립트에서 때에 따라 중요하게 사용될 수 있습니다.</p>
<h3 id="함수-선언-Declaration-과-표현-Expression"><a href="#함수-선언-Declaration-과-표현-Expression" class="headerlink" title="함수 선언(Declaration)과 표현(Expression)"></a>함수 선언(Declaration)과 표현(Expression)</h3><p>IIFE를 설명하기 전에 함수의 선언(Function Declaration)과 함수의 표현(Function Expression)의 차이점에 대해 이해할 필요가 있습니다. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FFunctions_and_function_scope#Defining_functions" target="_blank" rel="external">Mozilla Developer Site의 함수</a>에 대한 설명을 보면 함수 표현식은 선언과 동일한 문법을 가지고 단지 표현식에서는 함수명이 생략될 수 있다고만 기술하고 있습니다. 틀린말은 아니지만 사실 이 보다 좀 더 뚜렷한 형태와 동작의 차이점을 가지고 있습니다.</p>
<p>함수 선언(declaration)은 미리 자바 스크립트의 실행 컨텍스트(execution context)에 로딩 되어 있으므로 언제든지 호출할 수 있지만, 표현식(Expression)은 인터프리터가 해당 라인에 도달 하였을때만 실행이 됩니다.</p>
<p>즉, 함수 선언(declaration)을 조건(conditionally)에 따라 할당(assignment)하거나, 생성, 또는 괄호 연산자로 그루핑(grouping)하여 표현식으로 나타낼 수 있습니다. 다음 소스는 함수 정의(선언과 표현)의 차이를 간단히 보여주고 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">foo(); <span class="comment">// success!</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'foo'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo(); <span class="comment">// "foo" is not defined.</span></div><div class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'foo'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">alert(foo); <span class="comment">// "foo" is not defined.</span></div><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;&#125;);</div><div class="line">alert(foo); <span class="comment">// "foo" is not defined.</span></div></pre></td></tr></table></figure></p>
<p>IIFE를 설명하기 위한 function declaration과 function expression의 설명은 이정도만 하겠습니다.</p>
<h4 id="즉시-호출-함수-표현식은-어떻게-작동하는가"><a href="#즉시-호출-함수-표현식은-어떻게-작동하는가" class="headerlink" title="즉시 호출 함수 표현식은 어떻게 작동하는가?"></a>즉시 호출 함수 표현식은 어떻게 작동하는가?</h4><ul>
<li>괄호쌍이 익명의 함수를 감싸서 함수 선언(declaration)을 함수 표현식(expression)으로 표현될 수 있습니다. 그러므로, 단순한 익명의 함수를 global 스코프에 선언하지 않고 어디서든 익명의 함수 표현식을 가질 수 있습니다.</li>
<li><p>따라서, 아래와 같은 표현식이 가능합니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 괄호 사용 안함</span></div><div class="line">x = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="comment">// 괄호 사용</span></div><div class="line">(x = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"><span class="comment">// 변수 x에는 함수의 값이 할당됩니다. 괄호로 둘러쌓인 함수는 익명의 함수 표현식이 됩니다.</span></div></pre></td></tr></table></figure>
</li>
<li><p>이와 유사하게 이름을 부여하고, 즉시 호출된 함수 표현식으로 생성할 수 도 있습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(showName = function (name) &#123;</div><div class="line">  console.log(name || &quot;No Name&quot;)</div><div class="line">  &#125;</div><div class="line">) (); // No Name</div><div class="line">showName(&quot;Rich&quot;); // Rich</div><div class="line">showName(); // No Name</div></pre></td></tr></table></figure>
</li>
<li><p>showName 함수는 선언과 동시에 실행이 되며, 이름이 있으므로 나중에 호출 할수도 있습니다.</p>
</li>
<li>하지만, 익명의 표현식은 나중에 다시 호출할 수 없습니다. 참조할 방법이 없기 때문입니다.</li>
<li>익명의 함수를 괄호안에(group context) 위치시킬 경우, 전체 그룹을 평가(evaluate)하고 값을 리턴합니다. 결국, 리턴값은 익명 함수 자신입니다.</li>
<li>마지막 두개의 괄호는 JS컴파일러에게 이 익명 함수를 바로 호출하라고 말합니다. 이것을 IIFE라고 부릅니다.</li>
</ul>
<h4 id="언제-IIFE를-사용하는가"><a href="#언제-IIFE를-사용하는가" class="headerlink" title="언제 IIFE를 사용하는가?"></a>언제 IIFE를 사용하는가?</h4><p><em>젼역 영역(Global Scope)를 오염 시키지 않기 위해서</em></p>
<p>IIFE를 사용하는 주된 이유는 변수를 전역(global scope)으로 선언하는 것을 피하기 위해서 입니다. 많은 JavaScript 라이브러리와 전문가들이 이 기법을 사용합니다. jQuery plugin개발자들 사이에서 특히 인기가 많습니다. JS어플리케이션의 Top-Level - main.js 또는 app.js와 같은 - 에서도 IIFE를 사용할 수 있습니다. 아래 코드는 지역 변수를 익명 함수로 위치시켜 외부와의 충돌을 방지할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// All the code is wrapped in the IIFE</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> firstName = “Richard”;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">init</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        doStuff (firstName);</div><div class="line">        <span class="comment">// code to start the application</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doStuff</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">// Do stuff here</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doMoreStuff</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">// Do more stuff here</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// Start the application</span></div><div class="line">    init ();</div><div class="line">&#125;) ();</div></pre></td></tr></table></figure></p>
<p>필요한 경우 마지막 괄호안에 외부 객체나 변수를 넣어 익명의 함수에 전달할 수 도 있습니다.</p>
<h5 id="조건문과-함께-사용하기"><a href="#조건문과-함께-사용하기" class="headerlink" title="조건문과 함께 사용하기"></a>조건문과 함께 사용하기</h5><p>잘 알려지지 않았지만, 복잡한 로직을 다룰때 조건에 따라 함수정의를 달리 하여 설정하고 호출 할 수도 있습니다. 이 기법은 때론 유용할 수도 있겠으나, 대채로 사용하지 않길 바랍니다. 프로그램의 전반적인 가독성을 떨어트리고 버그를 양산할 수 있습니다. 꼭 사용해야 한다면 들여쓰기를 충분히 하여 코드를 읽기 쉽도록 유지하시기 바랍니다.</p>
<h5 id="클로저에서-값의-중복-현상-해결"><a href="#클로저에서-값의-중복-현상-해결" class="headerlink" title="클로저에서 값의 중복 현상 해결"></a>클로저에서 값의 중복 현상 해결</h5><p><a href="http://chanlee.github.io/2013/12/10/understand-javascript-closure/">자바스크립트 클로저 쉽게 이해하기</a> 에서 다루었던것 처럼, 순환문내에서 클로저 사용시 IIFE 기법을 사용해 참조에 의한 클로저의 오작동을 해결할 수 있습니다.</p>
<p>IIFE기법은 이제 많은 JS프레임워크들이나 오픈소스에서 쉽게 찾아볼 수 있습니다. JS코딩을 하면서 아직 이 기법에 대해 잘 모르거나 쓰고 있지만, 어떻게 작동하고 왜 사용하는지 모르고 있다면 이 글이 이해를 돕는데 조금이나마 도움이 되었길 바랍니다.</p>
<p>더 자세한 정보는 아래 참고 사이트의 글들을 참고 하시기 바랍니다.</p>
<p><a href="http://javascriptissexy.com/12-simple-yet-powerful-javascript-tips/" target="_blank" rel="external">12 Simple (Yet Powerful) JavaScript Tips</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FFunctions_and_function_scope#Defining_functions" target="_blank" rel="external">Functions and function scope</a><br><a href="http://dmitrysoshnikov.com/ecmascript/chapter-5-functions/#question-about-surrounding-parentheses" target="_blank" rel="external">ECMA-262-3 in details</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/12/10/javascript-variable-scope-and-hoisting/" itemprop="url">
                  자바스크립트의 변수범위와 호이스팅
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">작성일</span>
            <time itemprop="dateCreated" datetime="2013-12-10T16:17:23+09:00" content="2013-12-10">
              2013-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/12/10/javascript-variable-scope-and-hoisting/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/12/10/javascript-variable-scope-and-hoisting/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>이 글에서, 우리는 자바스크립트 변수의 범위(scope)와 호이스팅(hoisting), 그리고 이 두가지의 특징에 관해 배워보겠습니다.</p>
<p><img src="/assets/js-scope.jpg" alt="scope image"></p>
<p>자바스크립트의 변수범위와 호이스팅이 작동하는 원리를 이해하는것은 필수적입니다. 이 두가지 컨셉은 직관적이면서도 이해하기가 쉽지 않습니다. 거기에는 미묘한 차이가 있으며, 자바스크립트 프로젝트에서 성공하기 위해서는 반드시 이해해야 합니다.</p>
<h3 id="변수-범위-Variable-Scope"><a href="#변수-범위-Variable-Scope" class="headerlink" title="변수 범위 (Variable Scope)"></a>변수 범위 (Variable Scope)</h3><p>변수 범위는 변수가 존재하는 컨텍스트입니다. 이것은 어디에서 변수에 접근할 수 있는지, 그 컨텍스트에서 변수에 접근할 수 있는지를 명시적으로 나타납니다.</p>
<p>변수는 지역 범위(local scope)와 전역 범위(global scope) 둘 중 하나를 가집니다.</p>
<h4 id="지역-변수-함수-수준-범위"><a href="#지역-변수-함수-수준-범위" class="headerlink" title="지역 변수 (함수 수준 범위)"></a>지역 변수 (함수 수준 범위)</h4><p>대부분의 프로그래밍 언어와 달리, 자바스크립트는 블럭-수준(block-level)의 범위를 가지고 있지 않습니다. 대신, 자바스크립트는 함수-수준(function-level)의 범위를 가집니다. 함수내에 정의된 변수는 지역 범위를 가지며, 해당 함수와 내부 함수에서만 접근이 가능합니다. 내부 함수에서 외부 함수의 변수 접근에 관한 더 자세한 내용은 클로저(Closure)를 설명한 글을 참조하시기 바랍니다.</p>
<p><em>함수-수준 범위의 예제</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">"Richard"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">var</span> name = <span class="string">"Jack"</span>; <span class="comment">// 지역 변수; showName()함수에서만 접근가능.</span></div><div class="line">     <span class="built_in">console</span>.log(name); <span class="comment">// Jack</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// Richard : 전역 변수</span></div></pre></td></tr></table></figure></p>
<p><em>잘못된 예제. (블럭-수준 범위로 오해할 경우)</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">"Richard"</span>;</div><div class="line"><span class="comment">// 아래의 if문은 name변수에 대한 지역-범위를 생성하지 않습니다.</span></div><div class="line"><span class="keyword">if</span> (name) &#123;</div><div class="line">     name = <span class="string">"Jack"</span>;</div><div class="line">     <span class="built_in">console</span>.log(name); <span class="comment">// Jack : 전역 변수</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// name은 여전히 전역변수이며 if문에서 변경되었습니다.</span></div><div class="line"><span class="built_in">console</span>.log(name); <span class="comment">// Jack</span></div></pre></td></tr></table></figure></p>
<p><em>지역변수를 선언하지 않는다면 문제를 일으킬 가능성이 높아집니다.</em></p>
<p>항상 지역변수를 사용하기 이전에 선언하도록 하십시오. JSHint를 사용하면 코드의 문법 오류나 스타일을 체크할 수 있습니다. 다음은 지역변수를 선언하지 않음으로 인해 문제가 발생한 경우입니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 지역변수를 var키워드로 선언하지 않았을 경우, 그것은 전역-범위(global-scope)가 됩니다.</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">"Michael Jackson"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCelebrityName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showOrdinaryPersonName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     name = <span class="string">"Johnny Evers"</span>;</div><div class="line">     <span class="built_in">console</span>.log(name);</div><div class="line">&#125;</div><div class="line">showCelebrityName(); <span class="comment">// Michael Jackson</span></div><div class="line"></div><div class="line"><span class="comment">// name 은 지역변수가 아닙니다. 이것은 전역변수 name을 변경해 버립니다.</span></div><div class="line">showOrdinaryPersonName(); <span class="comment">// Johnny Evers</span></div><div class="line"></div><div class="line"><span class="comment">// 이제 전역변수 name은 Johny Evers입니다. 더이상, 셀럽의 이름은 없습니다. -.-;;</span></div><div class="line">showCelebrityName(); <span class="comment">// Johnny Evers</span></div><div class="line"></div><div class="line"><span class="comment">// 해결책은 지역변수 선언시 var 키워드를 사용하는 것입니다.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showOrdinaryPersonName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">var</span> name = <span class="string">"Johnny Evers"</span>; <span class="comment">// 이제 name은 항상 지역변수이며, 전역변수를 덮어쓰지 않습니다.</span></div><div class="line">     <span class="built_in">console</span>.log(name);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><em>지역번수는 함수내에서 전역번수보다 높은 우선순위를 가집니다.</em></p>
<p>만약, 같은 이름의 전역변수와 지역변수가 존재할 경우 이 변수를 함수내에서 사용한다면, 지역변수가 우선권을 갖게 됩니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">"Paul"</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">users</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">var</span> name = <span class="string">"Jack"</span>;</div><div class="line">     <span class="built_in">console</span>.log(name);</div><div class="line">&#125;</div><div class="line">users(); <span class="comment">// Jack</span></div></pre></td></tr></table></figure></p>
<h4 id="전역-변수"><a href="#전역-변수" class="headerlink" title="전역 변수"></a>전역 변수</h4><p>함수의 외부에서 선언된 모든 변수는 전역 범위(global scope)를 가집니다. 브라우저에서, 전역 컨텍스트(또는 scope)는 window 객체를 가리킵니다.</p>
<p>그러므로, 전역변수는 전체 어플리케이션에서 사용이 가능합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 전역변수는 아래와 같이 선언될 수 있습니다.</span></div><div class="line"><span class="keyword">var</span> myName = <span class="string">"Richard"</span>;</div><div class="line"><span class="comment">// 또는</span></div><div class="line">firstName = <span class="string">"Richard"</span>;</div><div class="line"><span class="comment">// 또는</span></div><div class="line"><span class="keyword">var</span> name;</div><div class="line">name;</div></pre></td></tr></table></figure></p>
<p>모든, 전역 변수는 window객체와 연결됩니다. 그러므로, 아래와 같이 window객체를 통해 모든 전역 변수에 접근이 가능합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.myName); <span class="comment">// Richard</span></div><div class="line"><span class="comment">// 또는</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"myName"</span> <span class="keyword">in</span> <span class="built_in">window</span>); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"firstName"</span> <span class="keyword">in</span> <span class="built_in">window</span>); <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p>만약, 변수가 최초 선언 없이(var 키워드를 사용하여) 초기화 되었다면, 이 변수는 자동으로 전역 컨텍스트에 추가됩니다:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showAge</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="comment">// age는 전역 변수입니다.</span></div><div class="line">     age = <span class="number">90</span>;</div><div class="line">     <span class="built_in">console</span>.log(age);</div><div class="line">&#125;</div><div class="line">showAge(); <span class="comment">// 90</span></div><div class="line"><span class="comment">// age는 전역 변수이므로, 이런식으로도 호출될 수 있습니다.</span></div><div class="line"><span class="built_in">console</span>.log(age); <span class="comment">// 90</span></div></pre></td></tr></table></figure></p>
<p>아래의 firtName은 둘다 전역 범위입니다. 두번째, firstName은 {} 블럭으로 쌓여있지만, 자바 스크립트는 블럭단위 범위를 지원하지 않는다는 것을 기억하기 바랍니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> firstName = <span class="string">"Richard"</span>;</div><div class="line">&#123;</div><div class="line">     <span class="keyword">var</span> firstName = <span class="string">"Bob"</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(firstName); <span class="comment">// Bob</span></div></pre></td></tr></table></figure></p>
<p>다른 예제:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">10</span>; i++) &#123;</div><div class="line">     <span class="built_in">console</span>.log(i); <span class="comment">// 1~10까지 출력</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 변수 i는 전역 변수입니다. 그러므로, 아래 함수 호출시 i는 for문에서 실행된 후 마지막 값을 가르키게 됩니다.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">aNumber</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(i);</div><div class="line">&#125;</div><div class="line"></div><div class="line">aNumber(); <span class="comment">// 11</span></div></pre></td></tr></table></figure></p>
<p><em>setTimeout 변수는 전역 범위에서 실행됩니다.</em></p>
<p>setTimeout 안에서 선언된 모든 함수는 전역 범위에서 실행됩니다. 다음 예제를 주의해서 보십시오.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// setTimeout 함수내에서 사용된 "this"객체는 myObj가 아니라, window객체를 참조합니다.</span></div><div class="line"><span class="keyword">var</span> highValue = <span class="number">200</span>;</div><div class="line"><span class="keyword">var</span> constantVal = <span class="number">2</span>;</div><div class="line"><span class="keyword">var</span> myObj = &#123;</div><div class="line">     <span class="attr">highValue</span>: <span class="number">20</span>,</div><div class="line">     <span class="attr">constantVal</span>: <span class="number">5</span>,</div><div class="line">     <span class="attr">calculateIt</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">               <span class="built_in">console</span>.log(<span class="keyword">this</span>.constantVal * <span class="keyword">this</span>.highValue);</div><div class="line">          &#125;, <span class="number">2000</span>);</div><div class="line">     &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 전역변수인 highValue와 constantVal을 사용하여 계산됩니다. 200*2.</span></div><div class="line">myObj.calculateIt(); <span class="comment">//400</span></div></pre></td></tr></table></figure>
<p><em>전역 범위를 오염시키지 마십시오</em></p>
<p>자바스크립트 전문가가 되려면, 가급적 전역 범위에 변수를 생성하는것을 피하도록 해야 합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 다음 두 변수는 전역 범위에 있습니다.</span></div><div class="line"><span class="keyword">var</span> firstName, lastName;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Full Name : "</span> + firstName + <span class="string">" "</span> + lastName);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>다음은, 개선된 코드로서 전역범위를 덜 오염시킵니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 함수내에 선언함으로서 이것은 지역변수 입니다.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">var</span> firstName = <span class="string">"Michael"</span>, lastName = <span class="string">"Jackson"</span>;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Full Name : "</span> + firstName + <span class="string">" "</span> + lastName);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>위의, 예제에서 fullName() 함수 역시 전역 범위에 있습니다.</p>
<h3 id="변수-호이스팅-Variable-Hoisting"><a href="#변수-호이스팅-Variable-Hoisting" class="headerlink" title="변수 호이스팅(Variable Hoisting)"></a>변수 호이스팅(Variable Hoisting)</h3><p>모든 변수선언은 호이스트 됩니다. 호이스트란, 변수의 정의가 그 범위에 따라 선언과 할당으로 분리되는 것을 의미합니다. 즉, 변수가 함수내에서 정의되었을 경우 선언이 함수의 최상위로, 함수 바깥에서 정의되었을 경우는 전역 컨텍스트의 최상위로 변경됩니다.</p>
<p>변수의 선언이 초기화나 할당시에 발생하는것이 아니라, 최상위로 호이스트 된다는 것을 명심해야 합니다. 다음 코드를 주목하십시오.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"First Name : "</span> + name);</div><div class="line">     <span class="keyword">var</span> name = <span class="string">"Ford"</span>;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Last Name : "</span> + name);</div><div class="line">&#125;</div><div class="line">showName();</div><div class="line"><span class="comment">// First Name : undefined</span></div><div class="line"><span class="comment">// Last Name : Ford</span></div><div class="line"><span class="comment">// First Name이 undefined인 이유는 지역변수 name이 호이스트 되었기 때문입니다.</span></div></pre></td></tr></table></figure></p>
<p>이 코드는 자바스크립트 엔진에 의해 다음과 같이 해석됩니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">var</span> name; <span class="comment">// name 변수는 호이스트 되었습니다. 할당은 이후에 발생하기 때문에, 이 시점에 name의 값은 undefined 입니다.</span></div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"First name : "</span> + name); <span class="comment">// First Name : undefined</span></div><div class="line">     name = <span class="string">"Ford"</span>; <span class="comment">// name에 값이 할당 되었습니다.</span></div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Last Name : "</span> + name); <span class="comment">// Last Name : Ford</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>호이스트 되었을때, 함수 선언은 변수선언을 덮어 씁니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 다음 두 변수와 함수는 myName으로 이름이 같습니다.</span></div><div class="line"><span class="keyword">var</span> myName; <span class="comment">// string</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Rich"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 함수 선언은 변수명을 덮어 씁니다.</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myName); <span class="comment">// function</span></div></pre></td></tr></table></figure></p>
<p>하지만, 변수에 값이 할당될 경우에는 반대로 변수가 함수선언을 덮어 씁니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myName = <span class="string">"Richard"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">"Rich"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myName); <span class="comment">//string</span></div></pre></td></tr></table></figure>
<p>“strict mode”에서 최초의 선언없이 변수에 값을 할당하려 한다면 오류가 발생합니다. 변수에 값을 할당 하려 할때는 항상 미리 선언하는 습관을 들이는것이 좋습니다.</p>
<blockquote>
<p>이 글은 javascriptissexy.com의 허락을 받아 번역 하였습니다. 상업적인 목적이 아니라면 얼마든지 퍼가셔도 좋습니다. 단, 원문과 번역의 차이가 다소 있을 수 있으므로 번역글과 함께 아래 원문 사이트 주소도 항상 첨부해 주시기 바랍니다. 그외 오역이나 개선될 문장이 있다면 트위터 멘션이나 댓글, 이메일등 어떤 경로로든 알려주시면 바로 잡도록 하겠습니다.</p>
</blockquote>
<p><a href="http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/" target="_blank" rel="external">Javascript variable scope and hoisting explained</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/12/10/understand-javascript-closure/" itemprop="url">
                  자바스크립트 클로저 쉽게 이해하기
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">작성일</span>
            <time itemprop="dateCreated" datetime="2013-12-10T15:54:14+09:00" content="2013-12-10">
              2013-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/12/10/understand-javascript-closure/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/12/10/understand-javascript-closure/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>클로저(Closure)는 프로그래머가 창조적이고 인상적이며 간결한 프로그래밍을 할 수 있게 해줍니다. 클로저는 빈번하게 사용되며 자바스크립트 스킬과 관계없이 자주 마주치게 될 것입니다. 물론, 지금 당장 클로저는 복잡해 보일 수 있습니다만, 이 글을 읽고 클로저에 대해 이해하게 된다면 자바스크립트 코딩시에 매일 사용하게 될 것입니다.</p>
<p>이 글은 비교적 클로저에 대해 간략히 설명하고 있습니다. 이 글을 계속 읽기전에 먼저 자바 스크립트의 변수 범위에 대해 이해할 필요가 있습니다. 만약, 그렇지 못하다면 블로그의 자바스크립트 변수의 범위와 호이스팅에 관한 글을 먼저 읽어 주시기 바랍니다.</p>
<p><img src="/assets/closure.jpg" alt="closure"></p>
<h3 id="클로저란-무엇인가"><a href="#클로저란-무엇인가" class="headerlink" title="클로저란 무엇인가"></a>클로저란 무엇인가</h3><p>클로저는 외부함수(포함하고 있는)의 변수에 접근할 수 있는 내부 함수를 일컫습니다. 스코프 체인(scope chain)으로 표현되기도 합니다. 클로저는 세가지 스코프 체인을 가집니다: 클로저 자신에 대한 접근(자신의 블럭내에 정의된 변수), 외부 함수의 변수에 대한 접근, 그리고 전역 변수에 대한 접근. 이렇게 3단계로 구분할 수 있습니다.</p>
<p>내부 함수는 외부 함수의 변수뿐만 아니라 파라미터에도 접근할 수 있습니다. 단, 내부 함수는 외부 함수의 arguments 객체를 호출할 수는 없습니다. (하지만, 외부 함수의 파라미터는 직접 호출할 수 있습니다.)</p>
<h4 id="기본적인-클로저-예제"><a href="#기본적인-클로저-예제" class="headerlink" title="기본적인 클로저 예제:"></a>기본적인 클로저 예제:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params">firstName, lastName</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> nameIntro = <span class="string">"Your name is "</span>;</div><div class="line">    <span class="comment">// 이 내부 함수는 외부함수의 변수뿐만 아니라 파라미터 까지 사용할 수 있습니다.</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">makeFullName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> nameIntro + firstName + <span class="string">" "</span> + lastName;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> makeFullName();</div><div class="line">&#125;</div><div class="line">showName(<span class="string">"Michael"</span>, <span class="string">"Jackson"</span>); <span class="comment">// Your name is Michael Jackson</span></div></pre></td></tr></table></figure>
<p>클로저는 Node.js의 비동기, 논-블록킹 아키텍처의 핵심기능으로 활용되고 있습니다. 클로저는 jQuery에서도 빈번히 사용되며, 거의 모든 자바스크립트 코드에서 볼 수 있습니다.</p>
<h4 id="jQuery의-전형적인-클로저-사용예"><a href="#jQuery의-전형적인-클로저-사용예" class="headerlink" title="jQuery의 전형적인 클로저  사용예:"></a>jQuery의 전형적인 클로저  사용예:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> selections = [];</div><div class="line">    $(<span class="string">".niners"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 이 클로저는 selections 변수에 접근합니다.</span></div><div class="line">        selections.push(<span class="keyword">this</span>.prop(<span class="string">"name"</span>)); <span class="comment">// 외부 함수의 selections 변수를 갱신함</span></div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="클로저-규칙과-부수-효과"><a href="#클로저-규칙과-부수-효과" class="headerlink" title="클로저 규칙과 부수 효과"></a>클로저 규칙과 부수 효과</h3><p><em>클로저는 외부함수가 리턴된 이후에도 외부함수의 변수에 접근할수 있습니다.</em></p>
<p>클로저를 사용하면서 가장 헷갈리는것 중의 하나는 외부함수가 리턴된 이후에도 여전히 내부함수가 외부함수의 변수에 접근하고 있다는 것입니다. (네. 당신이 바로 읽은것 맞습니다.-.-) 자바스크립트의 함수가 실행되었을때, 함수는 자신이 생성되었을때와 동일한 스코프 체인을 사용합니다. 그러므로, 당신은 내부 함수를 나중에 호출할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">celebrityName</span>(<span class="params">firstName</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> nameIntro = <span class="string">"This is celebrity is "</span>;</div><div class="line">    <span class="comment">// 이 내부 함수는 외부함수의 변수와 파라미터에 접근할 수 있습니다.</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">lastName</span>(<span class="params">theLastName</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> nameIntro + firstName + <span class="string">" "</span> + theLastName;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> lastName;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> mjName = celebrityName(<span class="string">"Michael"</span>); <span class="comment">// 여기서 celebrityName 외부함수가 리턴됩니다.</span></div><div class="line"><span class="comment">// 외부함수가 위에서 리턴된 후에, 클로저(lastName)가 호출됩니다.</span></div><div class="line"><span class="comment">// 아직, 클로저는 외부함수의 변수와 파라미터에 접근 가능합니다.</span></div><div class="line">mjName(<span class="string">"Jackson"</span>); <span class="comment">// This celebrity is Michael Jackson</span></div></pre></td></tr></table></figure></p>
<p><em>클로저는 외부 함수의 변수에 대한 참조를 저장합니다.</em></p>
<p>클로저는 실제 값을 저장하지 않습니다. 클로저가 호출되기 전에 외부함수의 변수가 변경되었을때, 클로저는 더 흥미로워 집니다. 그리고, 이 강력한 기능은 창의적인 방법으로 활용될 수 있습니다. 아래의 내부(private) 변수예제는 더글라스 크락포드(Douglas Crockford)에 의해 처음 시연되었습니다:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">celebrityID</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> celebrityID = <span class="number">999</span>;</div><div class="line">    <span class="comment">// 우리는 몇개의 내부 함수를 가진 객체를 리턴할것입니다.</span></div><div class="line">    <span class="comment">// 모든 내부함수는 외부변수에 접근할 수 있습니다.</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">getID</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// 이 내부함수는 갱신된 celebrityID변수를 리턴합니다.</span></div><div class="line">            <span class="comment">// 이것은 changeThdID함수가 값을 변경한 이후에도 celebrityID의 현재값을 리턴합니다.</span></div><div class="line">            <span class="keyword">return</span> celebrityID;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">setID</span>: <span class="function"><span class="keyword">function</span>(<span class="params">theNewID</span>) </span>&#123;</div><div class="line">            <span class="comment">// 이 내부함수는 외부함수의 값을 언제든지 변경할 것입니다.</span></div><div class="line">            celebrityID = theNewID;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> mjID = celebrityID(); <span class="comment">// 이 시점에, celebrityID외부 함수가 리턴됩니다.</span></div><div class="line">mjID.getID(); <span class="comment">// 999</span></div><div class="line">mjID.setID(<span class="number">567</span>); <span class="comment">// 외부함수의 변수를 변경합니다.</span></div><div class="line">mjID.getID(); <span class="comment">// 567; 변경된 celebrityID변수를 리턴합니다.</span></div></pre></td></tr></table></figure></p>
<h3 id="클로저-비꼬기"><a href="#클로저-비꼬기" class="headerlink" title="클로저 비꼬기"></a>클로저 비꼬기</h3><p>클로저가 갱신된 외부함수의 변수에 접근함으로써, 외부 함수의 변수가 for문에 의해 변경될 경우 의도치 않은 버그가 발생할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">celebrityIDCreator</span>(<span class="params">theCelebrities</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i;</div><div class="line">    <span class="keyword">var</span> uniqueID = <span class="number">100</span>;</div><div class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;theCelebrities.length; i++) &#123;</div><div class="line">        theCelebrities[i][<span class="string">"id"</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> uniqueID + i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> theCelebrities;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> actionCelebs = [&#123;<span class="attr">name</span>:<span class="string">"Stallone"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;, &#123;<span class="attr">name</span>:<span class="string">"Cruise"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;, &#123;<span class="attr">name</span>:<span class="string">"Willis"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;];</div><div class="line"></div><div class="line"><span class="keyword">var</span> createIdForActionCelebs = celebrityIDCreator(actionCelebs);</div><div class="line"></div><div class="line"><span class="keyword">var</span> stalloneID = createIdForActionCelebs[<span class="number">0</span>];</div><div class="line"><span class="built_in">console</span>.log(stalloneID.id); <span class="comment">// 103</span></div></pre></td></tr></table></figure></p>
<p>위의 예제에서, 익명의 내부함수가 실행될 시점에 i의 값은 3입니다(배열의 크기만큼 증가한 값). 숫자 3은 uniqueID에 더해져 모든 celebritiesID에 103을 할당합니다. 그래서, 기대(100,101,102)와 달리 모든 리턴된 배열의 id=103이 됩니다.</p>
<p>이런 결과가 나타난 이유는, 앞서 언급했듯이 클로저는(이 예제에서 내부의 익명함수) 외부 변수에 대해 값이 아닌 참조로 접근하기 때문입니다. 즉, 클로저는 최종 갱신된 변수(i)에 대해서만 접근할 수 있으므로, 외부 함수가 전체 for문을 실행하고 리턴한 최종 i의 값을 리턴하게 됩니다. 100+3=103.</p>
<p>이런 부작용을 고치기 위해서 “즉시 호출된 함수 표현식(Immediately Invoked Function Expression. IIFE)”를 사용할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">celebrityIDCreator</span>(<span class="params">theCelebrities</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i;</div><div class="line">    <span class="keyword">var</span> uniqueID = <span class="number">100</span>;</div><div class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;theCelebrities.length; i++) &#123;</div><div class="line">        theCelebrities[i][<span class="string">"id"</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">j</span>) </span>&#123;</div><div class="line">            <span class="comment">// j 파라미터는 호출시 즉시 넘겨받은(IIFE) i의 값이 됩니다.</span></div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="comment">// for문이 순환할때마다 현재 i의 값을 넘겨주고, 배열에 저장합니다.</span></div><div class="line">                <span class="keyword">return</span> uniqueID + j;</div><div class="line">            &#125; () <span class="comment">// 함수의 마지막에 ()를 추가함으로써 함수를 리턴하는 대신 함수를 즉시 실행하고 그 결과값을 리턴합니다.</span></div><div class="line">        &#125; (i); <span class="comment">// i 변수를 파라미터로 즉시 함수를 호출합니다.</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> theCelebrities;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> actionCelebs = [&#123;<span class="attr">name</span>:<span class="string">"Stallone"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;, &#123;<span class="attr">name</span>:<span class="string">"Cruise"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;, &#123;<span class="attr">name</span>:<span class="string">"Willis"</span>, <span class="attr">id</span>:<span class="number">0</span>&#125;];</div><div class="line"></div><div class="line"><span class="keyword">var</span> createIdForActionCelebs = celebrityIDCreator(actionCelebs);</div><div class="line"></div><div class="line"><span class="keyword">var</span> stalloneID = createIdForActionCelebs[<span class="number">0</span>];</div><div class="line"><span class="built_in">console</span>.log(stalloneID.id); <span class="comment">// 100</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> cruiseID = createIdForActionCelebs[<span class="number">1</span>];</div><div class="line"><span class="built_in">console</span>.log(cruiseID.id); <span class="comment">// 101</span></div></pre></td></tr></table></figure></p>
<p>이 글은 javascriptissexy.com의 허락을 받아 번역 하였습니다. 상업적인 목적이 아니라면 얼마든지 퍼가셔도 좋습니다. 단, 원문과 번역의 차이가 다소 있을 수 있으므로 번역글과 함께 아래 원문 사이트 주소도 항상 첨부해 주시기 바랍니다. 그외 오역이나 개선될 문장이 있다면 트위터 멘션이나 댓글, 이메일등 어떤 경로로든 알려주시면 바로 잡도록 하겠습니다.</p>
<p><a href="http://javascriptissexy.com/understand-javascript-closures-with-ease/" target="_blank" rel="external">Understand JavaScript Closures With Ease</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/11/27/require-js/" itemprop="url">
                  RequireJS 살펴보기
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">작성일</span>
            <time itemprop="dateCreated" datetime="2013-11-27T14:58:06+09:00" content="2013-11-27">
              2013-11-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/11/27/require-js/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/11/27/require-js/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>RequireJS는 자바스크립트 코드를 모듈화 하고, 모듈간의 종속성을 깔끔하게 해결해 줍니다. Java나 Python과 같은 일반적인 언어들의 경우 언어 측면에서 기본적인 모듈화 방안을 제공합니다만, 자바스크립트의 경우 기본적으로 글로벌 네임스페이스를 공유함으로 신경써서 관리하지 않으면 유지보수가 어려워 집니다. RequireJS는 비단 브라우저 환경 뿐만 아니라, NodeJS와 같은 환경에서도 활용될 수 있으므로, 스크립트 최적화와 관리에 큰 도움이 될 것입니다.  </p>
<p>이 글은 <a href="http://requirejs.org/docs/api.html" target="_blank" rel="external">requirejs.org</a>의 문서 내용을 기반으로 정리하였습니다. 번역 과정에서 일부 생략하고 의역한 부분이 있습니다. 번역 자체가 목적이 아니라 정리와 학습을 목적으로 함으로 좀 더 상세한 내용을 알고 싶으신 분은 원문을 참고 하시기 바랍니다.  </p>
<p><img src="/assets/requirejs-logo.svg" alt="requirejs logo"></p>
<h3 id="자바스크립트-파일-로딩"><a href="#자바스크립트-파일-로딩" class="headerlink" title="자바스크립트 파일 로딩"></a>자바스크립트 파일 로딩</h3><p>RequireJS는 기존의 <code>&lt;script&gt;</code>태그 방식과 다르게 스크립트를 로딩합니다. RequireJS의 궁극적인 목적은 자바스크립트 코드를 모듈화 하는 것입니다. 아울러 lazy-loading을 통해서 스크립트 로딩을 최적화 합니다. 그렇기 때문에, RequireJS에서는 스크립트를 URL이 아닌 모듈ID를 사용해 로딩합니다.  </p>
<p>RequireJS는 모든 코드를 baseUrl에 상대경로 표시합니다. baseUrl은 보통 data-main 속성에서 사용한 경로와 같습니다. data-main 속성은 Requirejs에서 사용하는 특수한 속성으로서 진입점 역할을 합니다.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"scripts/main.js"</span> <span class="attr">src</span>=<span class="string">"scripts/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>위 코드에서 baseUrl은 결국 scripts 디렉토리가 됩니다.  </p>
<blockquote>
<p>baseUrl은 추후 config에서 변경할 수도 있습니다. 위 예는 일반적으로 사용하는 기본값입니다. RequireJS는 모든 종속성이 스크립트로 간주되므로 모듈ID에 “.js”확장자를 생략할 수 있습니다.</p>
</blockquote>
<p>경우에 따라 위와 같이 “baseUrl + path” 규칙 대신 좀 더 유연한 방식으로 경로를 설정할 수도 있습니다. 예를들어, 사용자정의 스크립트 모듈들과 써드파티 스크립트 모듈들을 구별하고 싶을경우 아래와 같이 디렉토리 레이아웃을 설정할 수 있습니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">www/</div><div class="line">  index.html</div><div class="line">  js/</div><div class="line">    app/</div><div class="line">      sub.js</div><div class="line">    lib/</div><div class="line">      jquery.js</div><div class="line">      canvas.js</div><div class="line">    app.js</div><div class="line">    require.js</div></pre></td></tr></table></figure></p>
<p>디렉토리 구조가 위와 같이 구성되어 있고, index.html에 아래와 같이 스크립트 로딩이 정의되어 있을 경우<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"js/app.js"</span> <span class="attr">src</span>=<span class="string">"js/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>app.js가 아래와 같이 작성되어 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">requirejs.config(&#123;</div><div class="line">    <span class="attr">baseUrl</span>: <span class="string">'js/lib'</span>,</div><div class="line">    <span class="attr">paths</span>: &#123;</div><div class="line">        <span class="attr">app</span>: <span class="string">'../app'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">requirejs([<span class="string">'jquery'</span>, <span class="string">'canvas'</span>, <span class="string">'app/sub'</span>],</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">$, canvas, sub</span>) </span>&#123;</div><div class="line">        <span class="comment">// jQuery, canvas, app/sub 모듈이 모두 로딩되고</span></div><div class="line">        <span class="comment">// 이곳에서 부터 사용할 수 있습니다.</span></div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h4 id="data-main-진입점"><a href="#data-main-진입점" class="headerlink" title="data-main 진입점"></a>data-main 진입점</h4><p>app.js는 스크립트 로딩의 진입점이자, 비동기로 모듈을 로딩합니다. 그러므로, index.html에 아래와 같이 스크립트 로딩을 정의할 경우 에러를 발생시킵니다.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"scripts/main"</span> <span class="attr">src</span>=<span class="string">"scripts/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"scripts/other.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><em>main.js:</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">paths</span>: &#123;</div><div class="line">        <span class="attr">foo</span>: <span class="string">'libs/foo-1.1.3'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><em>other.js</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>( [<span class="string">'foo'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"> foo </span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>이 코드는 require.config()가 실행되기 전에 호출됩니다. 그러므로, requirejs는 ‘scripts/libs/foo-1.1.3.js’ 대신, ‘scripts/foo.js’를 로딩하려 합니다.</p>
<h4 id="require-config"><a href="#require-config" class="headerlink" title="require.config"></a>require.config</h4><p>이런경우 require.config()를 require.js를 HTML페이지의 앞부분에서 로딩할수도 있습니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"scripts/require.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script&gt;</div><div class="line">    <span class="built_in">require</span>.config(&#123;</div><div class="line">        <span class="attr">baseUrl</span>: <span class="string">"/another/path"</span>,</div><div class="line">        <span class="attr">paths</span>: &#123;</div><div class="line">            <span class="attr">foo</span>: <span class="string">'libs/foo-1.1.3'</span>,</div><div class="line">            <span class="attr">some</span>: <span class="string">'some/v1.0'</span></div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="built_in">require</span>( [<span class="string">'foo'</span>, <span class="string">'my/module'</span>, <span class="string">'some/module'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"> foo, myModule, someModule </span>) </span>&#123;</div><div class="line"></div><div class="line">    &#125;);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<h5 id="설정-옵션"><a href="#설정-옵션" class="headerlink" title="설정 옵션"></a>설정 옵션</h5><ul>
<li>baseUrl : 모듈을 검색하기 위한 루트경로 입니다. 위 예제의 경우 “my/module”의 script경로는 “/another/path/my/module.js” 가 됩니다.</li>
<li>paths :* 모듈 경로를 alias와 같이 제공합니다. 위 예제에서 require()의 인자에 포함된 ‘foo’는 script경로 “/another/path/libs/foo-1.1.3.js”를 가르킵니다. ‘some/module’은 실제 ‘/another/path/some/v1.0/module.js’를 가르킵니다.</li>
<li>shim : define()으로 정의되지 않는 기존의 <code>&lt;script&gt;</code> 스타일의 스크립트들에 대한 의존성 주입 설정 입니다.</li>
</ul>
<p>아래 예제는 requirejs 2.1.0이상과 backbone.js, underscore.js,와 jQuery는 baseUrl디렉토리를 사용하게 될것이다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">requirejs.config(&#123;</div><div class="line">    <span class="attr">shim</span>: &#123;</div><div class="line">        <span class="string">'backbone'</span>: &#123;</div><div class="line">            <span class="attr">deps</span>: [<span class="string">'underscore'</span>, <span class="string">'jquery'</span>],</div><div class="line">            <span class="comment">//module value.</span></div><div class="line">            exports: <span class="string">'Backbone'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="string">'underscore'</span>: &#123;</div><div class="line">            <span class="attr">exports</span>: <span class="string">'_'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="string">'foo'</span>: &#123;</div><div class="line">            <span class="attr">deps</span>: [<span class="string">'bar'</span>],</div><div class="line">            <span class="attr">exports</span>: <span class="string">'Foo'</span>,</div><div class="line">            <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params">bar</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.Foo.noConflict();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>이후에 다른 js모듈에서 backbone을 다음과 같이 사용할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define([<span class="string">'backbone'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">Backbone</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> Backbone.Model.extend(&#123;&#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h6 id="map"><a href="#map" class="headerlink" title="map"></a>map</h6><p>프로젝트가 커질 경우 특정 모듈을 개선하면서, 의존하는 모듈의 버전이 변경되었다고 가정할 수 있습니다. 이경우, 기존 버전에 의존하는 모듈과 개선된 모듈이 의존하는 모듈의 버전이 달라질 수 있습니다. 하지만, 아직 이 두 모듈이 프로젝트 내에서 공존해야 할경우 config에서 map설정을 통해 해결할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">requirejs.config(&#123;</div><div class="line">      <span class="attr">map</span>: &#123;</div><div class="line">           <span class="string">'*'</span>: &#123;</div><div class="line">                <span class="string">'foo'</span>: <span class="string">'foo1.2'</span></div><div class="line">           &#125;,</div><div class="line">           <span class="string">'some/oldmodule'</span>: &#123;</div><div class="line">                <span class="string">'foo'</span>: <span class="string">'foo1.0'</span></div><div class="line">           &#125;</div><div class="line">      &#125;</div><div class="line"> &#125;);</div></pre></td></tr></table></figure></p>
<p> ‘some/oldmodule’을 제외한 모든 모듈에 “foo1.2”가 사용됩니다.</p>
<h5 id="config"><a href="#config" class="headerlink" title="config"></a>config</h5><p> 모듈에 환경설정등 사용자 정의값이 필요할 경우에 config 속성을 사용할 수 있습니다.<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">requirejs.config(&#123;</div><div class="line">     <span class="attr">config</span>: &#123;</div><div class="line">          <span class="string">'bar'</span>: &#123;</div><div class="line">               <span class="attr">size</span>: <span class="string">'large'</span></div><div class="line">          &#125;,</div><div class="line">          <span class="string">'baz'</span>: &#123;</div><div class="line">               <span class="attr">color</span>: <span class="string">'blue'</span></div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p> 이경우, bar.js 모듈에서는 module.config().size를, baz.js 모듈에서는 module.config().color를 사용할 수 있습니다.</p>
<h5 id="waitSeconds"><a href="#waitSeconds" class="headerlink" title="waitSeconds"></a>waitSeconds</h5><p> 스크립트 로딩에 대한 타임아웃 시간입니다. 0은 disable이며, 기본값은 7초 입니다.</p>
<h5 id="deps"><a href="#deps" class="headerlink" title="deps"></a>deps</h5><p> requre.js가 로딩되기전 config객체에서 의존성이 필요할 경우, 로딩할 의존성 목록을 배열로 나열합니다.</p>
<h3 id="모듈-정의하기"><a href="#모듈-정의하기" class="headerlink" title="모듈 정의하기"></a>모듈 정의하기</h3><p>모듈은 well-scoped한 객체를 선언하고 종속되는 모듈들의 리스트를 명시적으로 기술함으로써 글로벌 네임스페이스가 오염되는것을 방지합니다. 하나의 모듈당 하나의 js파일을 작성해야 합니다. 모듈을은 최적화 도구에 의해 하나의 번들(optimized bundles)로 그룹핑될 수도 있습니다.</p>
<h4 id="단순한-이름-값-형태의-모듈-정의"><a href="#단순한-이름-값-형태의-모듈-정의" class="headerlink" title="단순한 이름/값 형태의 모듈 정의"></a>단순한 이름/값 형태의 모듈 정의</h4><p>어떤 종속성도 가지지 않으며 단순한 이름/값 형태의 컬렉션이라면, 객체 상수를 define()함수에 작성하기만 하면 됩니다.</p>
<p><em>my/shirt.js:</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">define(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="string">"black"</span>,</div><div class="line">    <span class="attr">size</span>: <span class="string">"unisize"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="함수-정의"><a href="#함수-정의" class="headerlink" title="함수 정의"></a>함수 정의</h4><p>모듈이 setup등의 사전 작업이 필요한 경우, 작업을 마친후 define()함수의 마지막 부분에서 함수를 리턴해 주면 됩니다.</p>
<p><em>my/shirt.js:</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//Do setup work here</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">color</span>: <span class="string">"black"</span>,</div><div class="line">        <span class="attr">size</span>: <span class="string">"unisize"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="종속성과-함께-함수-정의"><a href="#종속성과-함께-함수-정의" class="headerlink" title="종속성과 함께 함수 정의"></a>종속성과 함께 함수 정의</h4><p>모듈이 종속성을 가질경우, define()함수의 첫번째 인자로 종속될 모듈들을 배열형태로 서술합니다. 그리고, 전달한 배열 순서대로 정의한 함수객체의 인자로 받아서 해당 모듈을 사용할 수 있습니다. 이 경우 새로 정의한 모듈은 종속된 모듈을 모두 한번 로딩한 다음 함수객체를 리턴하게 됩니다. my/shirt.js: cart와 inventory라는 모듈에 의존합니다. 의존 모듈을은 모두 shirts.js와 같은 디렉토리에 존재합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">define([<span class="string">"./cart"</span>, <span class="string">"./inventory"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">cart, inventory</span>) </span>&#123;</div><div class="line">    <span class="comment">//return an object to define the "my/shirt" module.</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">color</span>: <span class="string">"blue"</span>,</div><div class="line">        <span class="attr">size</span>: <span class="string">"large"</span>,</div><div class="line">        <span class="attr">addToCart</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            inventory.decrement(<span class="keyword">this</span>);</div><div class="line">            cart.add(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="함수-모듈-정의"><a href="#함수-모듈-정의" class="headerlink" title="함수 모듈 정의"></a>함수 모듈 정의</h4><p>모듈의 함수는 어떤 객체든지 리턴할 수 있습니다. 다음 모듈은 모듈정의에서 함수를 리턴합니다. foo/title.js: 이 모듈은 cart와 inventory모듈에 의존성을 갖습니다. 이 모듈들은 다른 디렉토리(my/)에 존재하므로 의존성 주입시 “my/cart, my/inventory”를 명시해 줍니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">define([<span class="string">"my/cart"</span>, <span class="string">"my/inventory"</span>],</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">cart, inventory</span>) </span>&#123;</div><div class="line">        <span class="comment">//return a function to define "foo/title".</span></div><div class="line">        <span class="comment">//It gets or sets the window title.</span></div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">title</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> title ? (<span class="built_in">window</span>.title = title) :</div><div class="line">                   inventory.storeName + <span class="string">' '</span> + cart.name;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h4 id="CommonJS-모듈을-포함한-모듈-정의"><a href="#CommonJS-모듈을-포함한-모듈-정의" class="headerlink" title="CommonJS 모듈을 포함한 모듈 정의"></a>CommonJS 모듈을 포함한 모듈 정의</h4><p>CommonJS 모듈 형태로 작성된 코드는 단순히 CommonJS Wrapper를 사용해 정의할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'a'</span>),</div><div class="line">            b = <span class="built_in">require</span>(<span class="string">'b'</span>);</div><div class="line"></div><div class="line">        <span class="comment">//Return the module value</span></div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>이때, define()에 전달되는 함수의 인자(require, exports, module)의 순서는 항상 위와 동일하여야 합니다.</p>
<h4 id="모듈에-이름-부여하기"><a href="#모듈에-이름-부여하기" class="headerlink" title="모듈에 이름 부여하기"></a>모듈에 이름 부여하기</h4><p>define() 함수 호출시 첫번째 인자에 모듈명을 부여할 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//명시적으로 "foo/title"이라는 이름을 부여함.</span></div><div class="line">define(<span class="string">"foo/title"</span>,</div><div class="line">    [<span class="string">"my/cart"</span>, <span class="string">"my/inventory"</span>],</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">cart, inventory</span>) </span>&#123;</div><div class="line">        <span class="comment">//Define foo/title object in here.</span></div><div class="line">   &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>이런 모듈명은 통상 “최적화 도구”에 의해 생성됩니다. 명시적으로 모듈명을 부여하는 것은 파일의 이동등에 따른 호환성(portability)을 떨어트리게 할 수 있으므로 가급적 사용을 자제하고, 최적화 도구를 이용해 생성되도록 합니다. 명시적인 모듈명은 스크립트 로딩을 빠르게 합니다.</p>
<h4 id="순환-의존-Circular-dependency"><a href="#순환-의존-Circular-dependency" class="headerlink" title="순환 의존(Circular dependency)"></a>순환 의존(Circular dependency)</h4><p>a는 b가 필요하고, b는 a를 필요로 하는 상황을 순환 의존이라고 합니다. 이경우 b모듈의 함수가 호출되면 a는 undefined가 됩니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//b.js:</span></div><div class="line">define([<span class="string">"require"</span>, <span class="string">"a"</span>],</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">require, a</span>) </span>&#123;</div><div class="line">       <span class="comment">// 여기서 인수로 전달받은 a객체는 null 입니다.</span></div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">title</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">"a"</span>).doSomething();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>위와 같은 상호 순환하는 의존관계는 드문경우이며, 의도하지 않았다면 이런 경우 설계를 다시 생각해 보는것이 좋을것입니다. 하지만, 간혹 이런 경우가 필요할 수 도 있으므로 오류를 피하기 위해 require()메스드를 이용해 나중에 모듈을 가져올 수 있습니다.</p>
<h4 id="JSONP-서비스-종속-기술하기"><a href="#JSONP-서비스-종속-기술하기" class="headerlink" title="JSONP 서비스 종속 기술하기"></a>JSONP 서비스 종속 기술하기</h4><p>JSONP는 외부 서비스를 자바스크립트에서 호출하는 기법입니다. 이것은 script태그를 통해 HTTP GET방식으로 작동합니다. requirejs에서 JSONP를 사용하기 위해서는 아래 예와 같이 URL끝부분에 callback파라미터의 값으로 define을 전달합니다. 그러면, 결과값이 define()의 인자값으로 전돨되어 모듈로 리턴됩니다.<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">require(["http://example.com/api/data.json?</div><div class="line">        callback=define"],</div><div class="line">    function (data) &#123;</div><div class="line">        //The data object will be the API response for the</div><div class="line">        //JSONP data call.</div><div class="line">        console.log(data);</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/chanlee.jpeg"
               alt="chanlee" />
          <p class="site-author-name" itemprop="name">chanlee</p>
          <p class="site-description motion-element" itemprop="description">Computing and Programming issues</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">포스트</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">카테고리</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">태그</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chanlee" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://twitter.com/chanlee" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chanlee</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'programmingnoteblog';
      var disqus_identifier = 'page/3/index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  

  

  

  


</body>
</html>
